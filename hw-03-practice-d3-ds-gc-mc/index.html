<!DOCTYPE html>
<html lang='en'>

<!-- Metadata -->
<head>
  <meta charset='utf-8'>


  <!-- Title -->
  <title>hw-03: Practicing D3</title>

  <!-- CSS Styling -->
  <link rel='stylesheet' href='style.css'>

  <!-- Favicons -->
  <link rel='apple-touch-icon' sizes='180x180' href='favicons/apple-touch-icon.png'>
  <link rel='icon' type='image/png' sizes='32x32' href='favicons/favicon-32x32.png'>
  <link rel='icon' type='image/png' sizes='16x16' href='favicons/favicon-16x16.png'>
  <link rel='manifest' href='favicons/site.webmanifest'>
  <link rel='shortcut icon' href='favicons/favicon.ico'>
  <meta name='msapplication-TileColor' content='#da532c'>
  <meta name='msapplication-config' content='favicons/browserconfig.xml'>
  <meta name='theme-color' content='#ffffff'>

</head>

<!-- Main page content -->
<body>

  <!-- Update this with your GitHub repo URL -->
  <span id='forkongithub'><a href='https://github.com/DS4200-Fall21-Sec02/hw-03-practice-d3-ds-gc-mc.git'>Fork me on GitHub</a></span>

  <!-- Writeup -->
  <div class='content-column'>
    <h1>hw-03: Practicing D3</h1>

    <p>
      The first graph, the bar chart shows the the prior criminal history of those detained pretrial. The y-axis shows the percentage of the total detained population. The x-axis seperates them out by year. Finally, the different colors represent the different groups of prior felonies.The categories are, 1 felony, 2-4 felonies, 5 or more felony convictions.  

      The second graph, the scatter plot is a different way of showing this same information. 
    </p>

    <h2>Simple formatting instructions</h2>

    <p>
      Use <code>&lt;p&gt;&lt;/p&gt;</code> tags to enclose a paragraph in html. <br>
      Use <code>&lt;h2&gt;&lt;/h2&gt;</code> to enclose a heading. <br>
      Use <code>&lt;br&gt;</code> to force a line break.
    </p>

    <p>
      There are two premade <code>div</code> in this document that will hold your visualizations. The first one has id <code>vis1</code>, the second one has <code>vis2</code>. Write your explanation and analysis close to each of your visualizations.
    </p>

    <p>
      Your first visualization goes here:
    </p>

    <!-- Visualization goes here -->
    <div class='vis-holder' id='vis1'></div>
    <script>

      const  margin = {
    top: 60,
    left: 50,
    right: 30,
    bottom: 35 }, width = 500 - margin.left - margin.right,
  height = 500 - margin.top - margin.bottom;

  const svg.d3.select("vis1").append("svg").attr("width", width + margin.left + margin.righ)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform",`translate(${margin.left},${margin.top})`);

  d3.csv("data/Priors_Clean.csv").then (function (data) {
    const subgroups = data.columns.slice(1)

    const years = data.map(d=> d.year)

    console.log(years)

    const x = d3.scaleBand().domain(years).range([0, width]).padding([.2])
    svg.append("g").attr("transform", `translate(0, ${height})`)
    .call(d3.axisBottom(x).tickSize(0));


    const y = d3.scaleLinear()
    .domain([0, 40])
    .range([ height, 0 ]);
  svg.append("g")
    .call(d3.axisLeft(y));


    const xSubgroup = d3.scaleBand()
    .domain(subgroups)
    .range([0, x.bandwidth()])
    .padding([0.05])


    const color = d3.scaleOrdinal()
    .domain(subgroups)
    .range(['#e41a1c','#377eb8','#4daf4a'])


  svg.append("g")
    .selectAll("g")
    // Enter in data = loop group per group
    .data(data)
    .join("g")
      .attr("transform", d => `translate(${x(d.group)}, 0)`)
    .selectAll("rect")
    .data(function(d) { return subgroups.map(function(key) { return {key: key, value: d[key]}; }); })
    .join("rect")
      .attr("x", d => xSubgroup(d.key))
      .attr("y", d => y(d.value))
      .attr("width", xSubgroup.bandwidth())
      .attr("height", d => height - y(d.value))
      .attr("fill", d => color(d.key));

})
</script>


	  <p>
      Your second visualization goes here:
    </p>

    <!-- Visualization goes here -->
    <div class='vis-holder' id='vis2'></div>

        <script>

      const  margin = {
    top: 60,
    left: 50,
    right: 30,
    bottom: 35 }, width = 500 - margin.left - margin.right,
  height = 500 - margin.top - margin.bottom;

  const svg.d3.select("vis1").append("svg").attr("width", width + margin.left + margin.righ)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform",`translate(${margin.left},${margin.top})`);

  d3.csv("data/Priors_Clean.csv").then (function (data) {
    const subgroups = data.columns.slice(1)

    const years = data.map(d=> d.year)

    console.log(years)

    const x = d3.scaleBand().domain(years).range([0, width]).padding([.2])
    svg.append("g").attr("transform", `translate(0, ${height})`)
    .call(d3.axisBottom(x).tickSize(0));


    const y = d3.scaleLinear()
    .domain([0, 40])
    .range([ height, 0 ]);
  svg.append("g")
    .call(d3.axisLeft(y));


    const xSubgroup = d3.scaleBand()
    .domain(subgroups)
    .range([0, x.bandwidth()])
    .padding([0.05])


    const color = d3.scaleOrdinal()
    .domain(subgroups)
    .range(['#e41a1c','#377eb8','#4daf4a'])


  svg.append("g")
    .selectAll("g")
    // Enter in data = loop group per group
    .data(data)
    .join("g")
      .attr("transform", d => `translate(${x(d.group)}, 0)`)
    .selectAll("circle")
    .data(function(d) { return subgroups.map(function(key) { return {key: key, value: d[key]}; }); })
    .join("circle")
      .attr("x", d => xSubgroup(d.key))
      .attr("y", d => y(d.value))
      .attr("width", xSubgroup.bandwidth())
      .attr("height", d => height - y(d.value))
      .attr("fill", d => color(d.key));

})
</script>

    <h2>Acknowledgments</h2>

    <p>
      <em>List here where any code, packages/libraries, text, images, designs, etc. that you leverage come from.</em>
      https://www.d3-graph-gallery.com/graph/barplot_grouped_basicWide.html 
    </p>

    <ul>
      <li><a href='https://d3js.org/'>
        D3: Data-Driven Documents</a>
        by Mike Bostock is used for manipulating the DOM to create visualizations.
      </li>
      <li><a href='https://codepo8.github.io/css-fork-on-github-ribbon/#'>
        Pure CSS responsive 'Fork me on GitHub' ribbon</a>
        by Chris Heilmann is used to create the banner that links back to the source code repository.
      </li>
      <li><a href='https://github.com/NEU-DS-4200-F20-Staff/Assignment--D3_Basic_Charts'>
        Assignment--D3_Basic_Charts</a>
        by Cody Dunne is used to create this assignment.
      </li>
    </ul>
  </div>

  <!-- Scripts at the end avoid need for dealing with async, defer, or onload event handlers -->
    <script src = "js\main.js"> </script>
  <script src="lib\d3.v6.1.1\d3.js"></script>
</body>

</html>